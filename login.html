<!DOCTYPE html>
<html>
	<head>
		<title>SHUMBA WEBSITE</title>
		<meta charset="utf-8" />
		<meta lang="en-us" />
		<link rel="stylesheet" type="text/css" href="login.css" />
	</head>
	<body>
		<main>
			<div class="main-frame">
				<h2>Login Now</h2>
				<form onsubmit="return false" id="loginForm">
					<div class="login-frames">
						<input
							id="idloginFormEmail"
							type="text"
							name="idloginFormEmail"
							required=""
						/>
						<label>Email</label>
						<small id="loginFormEmail1" class="errorMessages"
							>Email field can't be empty</small
						>
						<small id="loginFormEmail" class="errorMessages"
							>you entered invalid email</small
						>
					</div>
					<div class="login-frames">
						<input id="Password" type="password" name="Password" required="" />
						<label>Password</label>
						<small id="loginFormPassword" class="errorMessages"
							>Password filled can't be empty</small
						>
						<small id="loginError" class="errorMessages"
							>incorect email/password</small
						>
					</div>
					<div>
						<button
							onclick="loginFormValidation();"
							id="submitData"
							type="submit"
						>
							<label>login</label>
						</button>
					</div>
					<p>
						If your not the admin, please <a href="index.html">click here</a>
					</p>
				</form>
			</div>
		</main>
		<!-- <script type="module">
			// Import the functions you need from the SDKs you need
			import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
			import {
				getAuth,
				createUserWithEmailAndPassword,
				signInWithEmailAndPassword,
			} from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
			import {
				getDatabase,
				set,
				ref,
				update,
			} from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
			// TODO: Add SDKs for Firebase products that you want to use
			// https://firebase.google.com/docs/web/setup#available-libraries

			// Your web app's Firebase configuration
			const firebaseConfig = {
				apiKey: "AIzaSyDOBHqEu_FX5cwR-P79SUHPrl85Eu2R91g",
				authDomain: "contact-form-e2058.firebaseapp.com",
				databaseURL: "https://contact-form-e2058-default-rtdb.firebaseio.com",
				projectId: "contact-form-e2058",
				storageBucket: "contact-form-e2058.appspot.com",
				messagingSenderId: "484040147864",
				appId: "1:484040147864:web:7586cb329bf14a753761ed",
			};

			// Initialize Firebase
			const app = initializeApp(firebaseConfig);
			const auth = getAuth();
			const database = getDatabase(app);

			submitData.addEventListener("click", (e) => {
				let email = document.getElementById("idloginFormEmail").value;
				let password = document.getElementById("Password").value;

				// createUserWithEmailAndPassword(auth, email, password)
				// 	.then((userCredential) => {
				// 		// Signed in
				// 		const user = userCredential.user;
				// 		// ...
				// 		set(ref(database, "users/" + user.uid), {
				// 			email: email,
				// 			password: password,
				// 		})
				// 			.then(() => {
				// 				// Data saved successfully!
				// 				alert("user added successfully");
				// 			})
				// 			.catch((error) => {
				// 				// The write failed...
				// 				alert(error);
				// 			});
				// 	})
				// 	.catch((error) => {
				// 		const errorCode = error.code;
				// 		const errorMessage = error.message;
				// 		// ..
				// 		alert(errorMessage);
				// 	});
				signInWithEmailAndPassword(auth, email, password)
					.then((userCredential) => {
						// Signed in
						const user = userCredential.user;
						window.location.href = "./dashboard/index.html";
						// ...
						let lgdate = new Date();
						update(ref(database, "users/" + user.uid), {
							last_login: lgdate,
						})
							.then(() => {
								// Data saved successfully!
								alert("login success");
							})
							.catch((error) => {
								// The write failed...
								alert(error);
							});
					})
					.catch((error) => {
						const errorCode = error.code;
						const errorMessage = error.message;
						alert(errorMessage);
					});
			});
		</script> -->
		<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
		<script src="assets/js/validation.js"></script>
		<script src="assets/js/validations.js"></script>
	</body>
</html>
